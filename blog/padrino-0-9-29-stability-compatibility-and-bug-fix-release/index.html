<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="initial-scale=1" name="viewport" /><title>Padrino - Padrino 0.9.29 - Stability, compatibility and bug fix release</title><link href="/assets/favicon.ico" rel="icon" type="image/ico" /><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" /><link href="../../assets/stylesheets/style-75d468d0.css" rel="stylesheet" /></head><body class="blog blog_padrino-0-9-29-stability-compatibility-and-bug-fix-release blog_padrino-0-9-29-stability-compatibility-and-bug-fix-release_index"><div class="grid"><header class="header"><h1 class="header__name"><a class="padrino-name" href="/">Padrino</a></h1><div class="header__navigation"><nav class="navigation"><a class="navigation__toggler" href="#" id="navigation__toggler"><span class="navigation__toggler__icon fa fa-navicon"></span></a><ul class="navigation__items" id="navigation__items"><li class="navigation__item"><a class="navigation__link" href="/">Overview</a></li><li class="navigation__item"><a class="navigation__link" href="/guides/">Guides</a></li><li class="navigation__item"><a class="navigation__link--is-active" href="/blog/">Blog</a></li><li class="navigation__item"><a class="navigation__link" href="http://www.rubydoc.info/github/padrino/padrino-framework">API</a></li><li class="navigation__item"><a class="navigation__link" href="/contribute/">Contribute</a></li><li class="navigation__item"><a class="navigation__link" href="https://github.com/padrino/padrino-framework"><span class="button--slim">GitHub</span></a></li></ul></nav></div></header><div class="page"><div class="page__sidebar"><div class="sidebar"><h4 class="sidebar__header--first">Blog</h4><h5 class="sidebar__header">Latest Posts</h5><ul class="sidebar__items"><li class="sidebar__item"><a class="sidebar__link" href="/blog/upgrading-padrino-from-0-12-x-to-0-13-0-guide/">Upgrading Padrino from 0.12.X to 0.13.0 Guide</a></li><li class="sidebar__item"><a class="sidebar__link" href="/blog/padrino-0-13-0-mustermann-router-performance-enhancements-streaming-support-and-much-more/">Padrino 0.13.0 - Mustermann Router, Performance Enhancements, Streaming Support, and Much More</a></li><li class="sidebar__item"><a class="sidebar__link" href="/blog/padrino-0-12-5/">Padrino 0.12.5</a></li><li class="sidebar__item"><a class="sidebar__link" href="/blog/padrino-0-12-4/">Padrino 0.12.4</a></li><li class="sidebar__item"><a class="sidebar__link" href="/blog/padrino-0-11-0-released-padrino-lives/">Padrino 0.11.0 Released - Padrino Lives!</a></li><li class="sidebar__item"><a class="sidebar__link" href="/blog/json-gem-vulnerability/">JSON gem vulnerability</a></li><li class="sidebar__item"><a class="sidebar__link" href="/blog/upgrade-rack-immediately/">Upgrade Rack immediately</a></li></ul></div></div><div class="page__content"><div class="content"><div class="article"><h1 class="article__title">Padrino 0.9.29 - Stability, compatibility and bug fix release</h1><p class="article__metadata">Posted on May 22, 2011 by Nathan</p><p>Today we are releasing Padrino 0.9.29, the latest in a series of stability and bug fix releases designed to bring us closer to the 0.10.0 release coinciding with the release of Sinatra 1.3! This release has several essential bug and compatibility fixes that ensure developers working with Padrino have a smooth experience. This release also might <strong>require a few changes</strong> due to a tweak in how session enabling works explained below.</p>

<p>The biggest changes are significant speed enhancements with our routing system, a complete rewrite of our development reloader, general core cleanup and Rake 0.9 and JRuby compatibility fixes. Read below for more details.</p>

<h2 id="upgrade-steps-for-0929">Upgrade Steps for 0.9.29</h2>

<p>When upgrading to this latest release, you should take advantage of project-wide configurations and apply the following snippet to <code>apps.rb</code>:</p>

<pre class="highlight plaintext"><code># config/apps.rb
Padrino.configure_apps do
  enable :sessions
  # $ padrino rake gen
  # $ rake secret
  set :session_secret, "long secret key pasted here"
end
</code></pre>

<p>Adding this to the top of your app.rb will enable sessions in all applications within the project and use a secret session key to persist the session properly across all these apps. Make sure to run the ‘rake secret’ command and put the session key into the <code>:session_secret</code> setting. Not doing this can create session related issues in your project.</p>

<h2 id="major-improvements-to-development-reloading">Major improvements to Development Reloading</h2>

<p>Over the last few releases, we have been experiencing a number of issues with our development reloader. Certain files weren't detected or reloaded properly, the reloader would hang up during a reload, certain files would be unloaded causing exceptions, et al.</p>

<p>In this release, we have worked closely with several users experiencing issues and in many ways completely rewrote the development code reloading system. We think the reloader is much more stable now and this also means faster boot and reloading times as well because the new reloader has been greatly streamlined.</p>

<p>Thanks specifically to @daddye of our core team for addressing these problems in the rewrite. Commits <a href="https://github.com/padrino/padrino-framework/commit/7c59e2ae060246a1aa3cbe0f4cb598e7ed90033c">here</a>, <a href="https://github.com/padrino/padrino-framework/commit/42bdac70516df094fc639644dbbd9d0a1339e0e3">here</a>, and <a href="https://github.com/padrino/padrino-framework/commit/b41bf1e21cf7a8b911c691e504a4178993c9fae5">here</a>. Let's not forget even more commits <a href="https://github.com/padrino/padrino-framework/commit/0122a24347402d9fd16e9c714ba890b54b1f5548">here</a>, <a href="https://github.com/padrino/padrino-framework/commit/47c1aba3207316fca92ecf46095f42cc5491c796">here</a> and finally <a href="https://github.com/padrino/padrino-framework/commit/e0c8b3939a7ea6724d5da1e6ec2ab180855b63c4">here</a>. Big thanks to <a href="https://github.com/bernerdschaefer">bernerdschaefer</a> for his help debugging and patching the reloader as well!</p>

<h2 id="core-cleanup">Core Cleanup</h2>

<p>In addition to the development reloader, we have also cleaned and refactored several other modules within padrino-core. In particular we have cleaned up and refactored our <code>SupportLite</code>, <code>Padrino::Application</code>, Gemfile generation, and the <code>Padrino::Server</code>:</p>

<ul>
  <li>Refactored and cleaned up Padrino::Server: <a href="https://github.com/padrino/padrino-framework/commit/bd89dc4540a974cb26e4feeef51a08643a5bf0f8">commit</a></li>
  <li>Removed old stuff from support_lite: <a href="https://github.com/padrino/padrino-framework/commit/30e7c4a69ffc135bcc5afc9bdea21ffc2591823e">commit</a></li>
  <li>Cleanup Gemfile to simplify loading: <a href="https://github.com/padrino/padrino-framework/commit/aa3a73d3de44fda32e64a65471ba448c9b8d53ab">commit</a></li>
  <li>Cleanup support lite and improved compatiblity with jruby: <a href="https://github.com/padrino/padrino-framework/commit/1852a47d4406ed31cc2defd6b96516c5760c9b1f">commit</a></li>
</ul>

<p>This cleanup is part of a larger effort as we work towards solidifying our internals.</p>

<h2 id="routing-speed-improvements">Routing Speed Improvements</h2>

<p>Our routing core <a href="https://github.com/joshbuddy/http_router/commits/master">http_router</a> has been significantly optimized in the last few point versions for speed. We will be doing several benchmarks soon and will post them but for now suffice to say we have been making a lot of strides to make our routing even faster then before and this will be an ongoing effort. Thanks to Joshua Hull of our core team for creating probably the best Ruby request router available and it work <a href="https://github.com/joshbuddy/http_router_sinatra">for plain Sinatra</a> too!</p>

<h2 id="truncate-words-helper">Truncate Words Helper</h2>

<p>A new helper has been added called “truncate_words”. This is an alternative to the existing “truncate” method which shortens a string by characters, this helper shortens a string by words:</p>

<pre class="highlight plaintext"><code>truncate_words("Once upon a time in a world far far away", :length =&gt; 4) =&gt; "Once upon a time..."
</code></pre>

<p>Commit is <a href="https://github.com/padrino/padrino-framework/commit/2b6778389e6b1ff9c8139b8c459b882762e2e538">here</a> and thanks to <a href="https://github.com/cearls">cearls</a> for contributing this helper for us!</p>

<h2 id="better-dependency-handling">Better Dependency Handling</h2>

<p>We have simplified dependency handling and the approach for adding new dependencies and load_paths to a Padrino application.</p>

<pre class="highlight plaintext"><code># config/boot.rb
Padrino.before_load
  MyApp.load_paths &lt;&lt; Padrino.root('app', 'observers')
  MyApp.dependencies &lt;&lt; Padrino.root('other_app', 'controllers.rb')
end
</code></pre>

<p>Commits <a href="https://github.com/padrino/padrino-framework/commit/1852a47d4406ed31cc2defd6b96516c5760c9b1f">here</a> and <a href="https://github.com/padrino/padrino-framework/commit/1852a47d4406ed31cc2defd6b96516c5760c9b1f">here</a>.</p>

<h2 id="bug-and-compatibility-fixes">Bug and Compatibility Fixes</h2>

<ul>
  <li>Compatibility with CouchRest::Model 1.1: <a href="https://github.com/padrino/padrino-framework/commit/826077086eddf1ec3479e7e28aa033a05cfb7ba3">commit</a></li>
  <li>Fix bug with render and local vars: <a href="https://github.com/padrino/padrino-framework/commit/5aeaa36ef7bd437ef05ba525288bab553ee24ca0">commit</a></li>
  <li>Honor <strong>/</strong> in Accept headers correctly – <a href="https://github.com/padrino/padrino-framework/commit/f1fdc23b14e2b7885235319a7df971bf4a345be3">commit</a></li>
  <li>Rake 0.9 Compatibility: <a href="https://github.com/padrino/padrino-framework/commit/117803feaf2ab1c61659b89364115e923f37ec75">commit</a></li>
  <li>Rack::Flash now sweeps on every request by default: <a href="https://github.com/padrino/padrino-framework/commit/d433e19483dcfa63b74065b7141641c0492c5241">commit</a></li>
  <li>Supports skipping Padrino::Render with constant: <a href="https://github.com/padrino/padrino-framework/commit/a9dc6f30e2e2b688a71df182c396a9fef9e71816">commit</a></li>
</ul>

<hr /><div id="disqus_thread"></div></div></div></div></div><hr /><footer class="footer"><p>Padrino is released under the MIT LICENSE<br />
Hosting by <a href="https://pages.github.com">GitHub Pages</a></p>
</footer><script src="../../assets/javascripts/all-c2e0cecd.js"></script></div><script src="https://padrinorb.disqus.com/embed.js"></script></body></html>
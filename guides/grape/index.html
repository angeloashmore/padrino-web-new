<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="initial-scale=1" name="viewport" /><title>Padrino - Mounting Grape</title><link href="/assets/favicon.ico" rel="icon" type="image/ico" /><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" /><link href="../../assets/stylesheets/style-75d468d0.css" rel="stylesheet" /></head><body class="guides guides_grape guides_grape_index"><div class="grid"><header class="header"><h1 class="header__name"><a class="padrino-name" href="/">Padrino</a></h1><div class="header__navigation"><nav class="navigation"><a class="navigation__toggler" href="#" id="navigation__toggler"><span class="navigation__toggler__icon fa fa-navicon"></span></a><ul class="navigation__items" id="navigation__items"><li class="navigation__item"><a class="navigation__link" href="/">Overview</a></li><li class="navigation__item"><a class="navigation__link--is-active" href="/guides/">Guides</a></li><li class="navigation__item"><a class="navigation__link" href="/blog/">Blog</a></li><li class="navigation__item"><a class="navigation__link" href="http://www.rubydoc.info/github/padrino/padrino-framework">API</a></li><li class="navigation__item"><a class="navigation__link" href="/contribute/">Contribute</a></li><li class="navigation__item"><a class="navigation__link" href="https://github.com/padrino/padrino-framework"><span class="button--slim">GitHub</span></a></li></ul></nav></div></header><div class="page"><div class="page__sidebar"><div class="sidebar"><h4 class="sidebar__header--first">Guides</h4><ul class="sidebar__items"><li class="sidebar__item"><a class="sidebar__link" href="/guides/">Home</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/getting-started/">Getting Started</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/installation/">Installation</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/basic-projects/">Basic Projects</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/generators/">Generators</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/development-commands/">Development Commands</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/mounting-applications/">Mounting Applications</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/blog-tutorial/">Blog Tutorial</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/application-helpers/">Application Helpers</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/padrino-admin/">Padrino Admin</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/padrino-mailer/">Padrino Mailer</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/padrino-cache/">Padrino Cache</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/controllers/">Controllers</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/localization/">Localization</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/extensions/">Extensions</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/rake-tasks/">Rake Tasks</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/the-bleeding-edge/">The Bleeding Edge</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/adding-new-components/">Adding New Components</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/standalone-usage-in-sinatra/">Standalone Usage in Sinatra</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/running-padrino-on-jruby/">Running Padrino on JRuby</a></li></ul></div></div><div class="page__content"><div class="content"><h1 id="mounting-grape">Mounting Grape</h1>

<p>Create your new project. It can be a regular one:</p>

<pre class="highlight shell"><code><span class="gp">$ </span>padrino g project gapp
</code></pre>

<p>Or a lean one if you donâ€˜t want any Sinatra apps in it:</p>

<pre class="highlight shell"><code><span class="gp">$ </span>padrino g project gapp --lean
</code></pre>

<p>Go to the new <code>gapp</code> folder and add <code>gem 'grape'</code> to <code>Gemfile</code>. Then install the required gems:</p>

<pre class="highlight shell"><code><span class="gp">$ </span>bundle
</code></pre>

<p>Create file <code>api/api.rb</code> and put your Grape code there:</p>

<pre class="highlight ruby"><code><span class="k">module</span> <span class="nn">Gapp</span>
  <span class="k">class</span> <span class="nc">API</span> <span class="o">&lt;</span> <span class="no">Grape</span><span class="o">::</span><span class="no">API</span>
    <span class="n">get</span> <span class="ss">:hello</span> <span class="k">do</span>
      <span class="p">{</span> <span class="ss">hello: </span><span class="s1">'grape'</span> <span class="p">}</span>
    <span class="k">end</span>

    <span class="n">get</span> <span class="s1">'status'</span> <span class="k">do</span>
      <span class="n">cookies</span><span class="p">[</span><span class="ss">:status_count</span><span class="p">]</span> <span class="o">||=</span> <span class="mi">0</span>
      <span class="n">cookies</span><span class="p">[</span><span class="ss">:status_count</span><span class="p">]</span> <span class="o">=</span> <span class="n">cookies</span><span class="p">[</span><span class="ss">:status_count</span><span class="p">].</span><span class="nf">to_i</span> <span class="o">+</span> <span class="mi">1</span>
      <span class="p">{</span> <span class="ss">status_count: </span><span class="n">cookies</span><span class="p">[</span><span class="ss">:status_count</span><span class="p">]</span> <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<p>Go to file <code>config/apps.rb</code> and add to the end of it:</p>

<pre class="highlight ruby"><code><span class="no">Padrino</span><span class="p">.</span><span class="nf">mount</span><span class="p">(</span><span class="s1">'API'</span><span class="p">,</span> <span class="ss">:app_file</span> <span class="o">=&gt;</span> <span class="no">Padrino</span><span class="p">.</span><span class="nf">root</span><span class="p">(</span><span class="s1">'api/api.rb'</span><span class="p">),</span> <span class="ss">:app_class</span> <span class="o">=&gt;</span> <span class="s1">'Gapp::API'</span><span class="p">).</span><span class="nf">to</span><span class="p">(</span><span class="s1">'/master'</span><span class="p">)</span>
</code></pre>

<p>Now you can run <code>rackup</code> from your <code>gapp</code> folder and visit <a href="http://127.0.0.1:9292/master/hello">http://127.0.0.1:9292/master/hello</a> or <a href="http://127.0.0.1:9292/master/status">http://127.0.0.1:9292/master/status</a></p>

<pre class="highlight html"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;hash&gt;</span>
  <span class="nt">&lt;hello&gt;</span>grape<span class="nt">&lt;/hello&gt;</span>
<span class="nt">&lt;/hash&gt;</span>
</code></pre>

<pre class="highlight html"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;hash&gt;</span>
  <span class="nt">&lt;status-count</span> <span class="na">type=</span><span class="s">"integer"</span><span class="nt">&gt;</span>42<span class="nt">&lt;/status-count&gt;</span>
<span class="nt">&lt;/hash&gt;</span>
</code></pre>

</div></div></div><hr /><footer class="footer"><p>Padrino is released under the MIT LICENSE<br />
Hosting by <a href="https://pages.github.com">GitHub Pages</a></p>
</footer><script src="../../assets/javascripts/all-c2e0cecd.js"></script></div></body></html>
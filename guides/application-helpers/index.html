<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="initial-scale=1" name="viewport" /><title>Padrino - Application Helpers</title><link href="/assets/favicon.ico" rel="icon" type="image/ico" /><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" /><link href="../../assets/stylesheets/style-75d468d0.css" rel="stylesheet" /></head><body class="guides guides_application-helpers guides_application-helpers_index"><div class="grid"><header class="header"><h1 class="header__name"><a class="padrino-name" href="/">Padrino</a></h1><div class="header__navigation"><nav class="navigation"><a class="navigation__toggler" href="#" id="navigation__toggler"><span class="navigation__toggler__icon fa fa-navicon"></span></a><ul class="navigation__items" id="navigation__items"><li class="navigation__item"><a class="navigation__link" href="/">Overview</a></li><li class="navigation__item"><a class="navigation__link--is-active" href="/guides/">Guides</a></li><li class="navigation__item"><a class="navigation__link" href="/blog/">Blog</a></li><li class="navigation__item"><a class="navigation__link" href="http://www.rubydoc.info/github/padrino/padrino-framework">API</a></li><li class="navigation__item"><a class="navigation__link" href="/contribute/">Contribute</a></li><li class="navigation__item"><a class="navigation__link" href="https://github.com/padrino/padrino-framework"><span class="button--slim">GitHub</span></a></li></ul></nav></div></header><div class="page"><div class="page__sidebar"><div class="sidebar"><h4 class="sidebar__header--first">Guides</h4><ul class="sidebar__items"><li class="sidebar__item"><a class="sidebar__link" href="/guides/">Home</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/getting-started/">Getting Started</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/installation/">Installation</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/basic-projects/">Basic Projects</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/generators/">Generators</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/development-commands/">Development Commands</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/mounting-applications/">Mounting Applications</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/blog-tutorial/">Blog Tutorial</a></li><li class="sidebar__item"><a class="sidebar__link--is-active" href="/guides/application-helpers/">Application Helpers</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/padrino-admin/">Padrino Admin</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/padrino-mailer/">Padrino Mailer</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/padrino-cache/">Padrino Cache</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/controllers/">Controllers</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/localization/">Localization</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/extensions/">Extensions</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/rake-tasks/">Rake Tasks</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/the-bleeding-edge/">The Bleeding Edge</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/adding-new-components/">Adding New Components</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/standalone-usage-in-sinatra/">Standalone Usage in Sinatra</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/running-padrino-on-jruby/">Running Padrino on JRuby</a></li></ul></div></div><div class="page__content"><div class="content"><h1 id="application-helpers">Application Helpers</h1>

<p>This component provides a great deal of view helpers related to html markup
generation. There are helpers for generating tags, forms, links, images, and
more. Most of the basic methods should be very familiar to anyone who has used
rails view helpers.</p>

<hr />

<h2 id="output-helpers">Output Helpers</h2>

<p>Output helpers are a collection of important methods for managing, capturing and
displaying output in various ways and is used frequently to support higher-level
helper functions. There are three output helpers worth mentioning:
<code>content_for</code>, <code>capture_html</code>, and <code>concat_content</code></p>

<p>The <code>content_for</code> functionality supports capturing content and then rendering
this into a different place such as within a layout. One such popular example is
including assets onto the layout from a template:</p>

<pre class="highlight erb"><code># app/views/site/index.erb
...
<span class="cp">&lt;%</span> <span class="n">content_for</span> <span class="ss">:assets</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">'index'</span><span class="p">,</span> <span class="s1">'custom'</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
...
</code></pre>

<p>Added to a template, this will capture the includes from the block and allow
them to be yielded into the layout:</p>

<pre class="highlight erb"><code># app/views/layout.erb
...
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;title&gt;</span>Example<span class="nt">&lt;/title&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">'style'</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">yield_content</span> <span class="ss">:assets</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/head&gt;</span>
</code></pre>

<p>This will automatically insert the contents of the block (in this case a
stylesheet include) into the location the content is yielded within the layout.</p>

<p>You can also check if a <code>content_for</code> block exists for a given key using
<code>content_for?</code>:</p>

<pre class="highlight erb"><code># app/views/layout.erb
<span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">content_for?</span><span class="p">(</span><span class="ss">:assets</span><span class="p">)</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;div&gt;</span><span class="cp">&lt;%=</span> <span class="n">yield_content</span> <span class="ss">:assets</span> <span class="cp">%&gt;</span><span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>

<p>The <code>capture_html</code> and the <code>concat_content</code> methods allow content to be
manipulated and stored for use in building additional helpers accepting blocks
or displaying information in a template. One example is the use of these in
constructing a simplified <code>form_tag</code> helper which accepts a block.</p>

<pre class="highlight ruby"><code><span class="c1"># form_tag '/register' do ... end</span>
<span class="k">def</span> <span class="nf">form_tag</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{},</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="c1"># ... truncated ...</span>
  <span class="n">inner_form_html</span> <span class="o">=</span> <span class="n">capture_html</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="n">concat_content</span> <span class="s1">'&lt;form&gt;'</span> <span class="o">+</span> <span class="n">inner_form_html</span> <span class="o">+</span> <span class="s1">'&lt;/form&gt;'</span>
<span class="k">end</span>
</code></pre>

<p>This will capture the template body passed into the <code>form_tag</code> block and then
append the content to the template through the use of <code>concat_content</code>. Note
have been built to work for both haml and erb templates using the same syntax.</p>

<p>The list of defined helpers in the ‘output helpers’ category:</p>

<ul>
  <li><code>content_for(key, &amp;block)</code>
    <ul>
      <li>Capture a block of content to be rendered at a later time.</li>
      <li>Existence can be checked using the <code>content_for?(key)</code> method.</li>
      <li><code>content_for(:head) { …content… }</code></li>
      <li>Also supports arguments passed to the content block</li>
      <li><code>content_for(:head) { |param1, param2| …content… }</code></li>
    </ul>
  </li>
  <li><code>yield_content(key, *args)</code>
    <ul>
      <li>Render the captured content blocks for a given key.</li>
      <li><code>yield_content :head</code></li>
      <li>Also supports arguments yielded to the content block</li>
      <li><code>yield_content :head, param1, param2</code></li>
    </ul>
  </li>
  <li><code>capture_html(*args, &amp;block)</code>
    <ul>
      <li>Captures the html from a block of template code for erb or haml</li>
      <li><code>capture_html(&amp;block)</code> =&gt; “…html…”</li>
    </ul>
  </li>
  <li><code>concat_content(text="")</code>
    <ul>
      <li>Outputs the given text to the templates buffer directly in erb or haml</li>
      <li><code>concat_content(“This will be output to the template buffer in erb or haml”)</code></li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="tag-helpers">Tag Helpers</h2>

<p>Tag helpers are the basic building blocks used to construct html ‘tags’ within a
view template. There are three major functions for this category: <code>tag</code>,
<code>content_tag</code> and <code>input_tag</code>.</p>

<p>The tag and <code>content_tag</code> are for building arbitrary html tags with a name and
specified options. If the tag contains ‘content’ within then <code>content_tag</code> is
used. For example:</p>

<pre class="highlight erb"><code>tag(:br, :style =&gt; ‘clear:both’) # =&gt; <span class="nt">&lt;br</span> <span class="na">style=</span><span class="s">"clear:both"</span> <span class="nt">/&gt;</span>
content_tag(:p, "demo", :class =&gt; ‘light’) # =&gt; <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"light"</span><span class="nt">&gt;</span>demo<span class="nt">&lt;/p&gt;</span>
</code></pre>

<p>The <code>input_tag</code> is used to build tags that are related to accepting input from
the user:</p>

<pre class="highlight erb"><code>input_tag :text, :class =&gt; "demo" # =&gt; <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">'text'</span> <span class="na">class=</span><span class="s">'demo'</span> <span class="nt">/&gt;</span>
input_tag :password, :value =&gt; "secret", :class =&gt; "demo"
</code></pre>

<p>Note that all of these accept html options and result in returning a string
containing html tags.</p>

<p>The list of defined helpers in the ‘tag helpers’ category:</p>

<ul>
  <li><code>tag(name, options=nil, open=false)</code>
    <ul>
      <li>Creates an html tag with the given name and options</li>
      <li><code>tag(:br, :style =&gt; ‘clear:both’, :open =&gt; true)</code> =&gt; <code>&lt;br style="clear:both"&gt;</code></li>
    </ul>
  </li>
  <li><code>content_tag(name, content, options=nil, &amp;block)</code>
    <ul>
      <li>Creates an html tag with given name, content and options</li>
      <li><code>content_tag(:p, “demo”, :class =&gt; ‘light’)</code> =&gt; <code>&lt;p class="light"&gt;demo&lt;/p&gt;</code></li>
      <li><code>content_tag(:p, :class =&gt; ‘dark’) { …content… }</code> =&gt; <code>&lt;p class="dark"&gt;...content...&lt;/p&gt;</code></li>
    </ul>
  </li>
  <li><code>input_tag(type, options = {})</code>
    <ul>
      <li>Creates an html input field with given type and options</li>
      <li><code>input_tag :text,     :class =&gt; “demo”</code></li>
      <li><code>input_tag :password, :value =&gt; “secret”, :class =&gt; “demo”</code></li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="asset-helpers">Asset Helpers</h2>

<p>Asset helpers are intended to help insert useful html onto a view template such
as ‘flash’ notices, hyperlinks, mail_to links, images, stylesheets and
javascript. An example of their uses would be on a simple view template:</p>

<pre class="highlight haml"><code># app/views/example.haml
...
<span class="nt">%head</span>
  <span class="p">=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">'layout'</span>
  <span class="p">=</span> <span class="n">javascript_include_tag</span> <span class="s1">'application'</span>
  <span class="p">=</span> <span class="n">favicon_tag</span> <span class="s1">'images/favicon.png'</span>
<span class="nt">%body</span>
  ...
  <span class="p">=</span> <span class="n">flash_tag</span> <span class="ss">:notice</span>
  <span class="nt">%p</span><span class="p">=</span> <span class="n">link_to</span> <span class="s1">'Blog'</span><span class="p">,</span> <span class="s1">'/blog'</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s1">'example'</span>
  <span class="nt">%p</span> Mail me at <span class="si">#{</span><span class="n">mail_to</span> <span class="s1">'fake@faker.com'</span><span class="p">,</span> <span class="s2">"Fake Email Link"</span><span class="p">,</span> <span class="ss">:cc</span> <span class="o">=&gt;</span> <span class="s2">"test@demo.com"</span><span class="si">}</span>
  <span class="nt">%p</span><span class="p">=</span> <span class="n">image_tag</span> <span class="s1">'padrino.png'</span><span class="p">,</span> <span class="ss">:width</span> <span class="o">=&gt;</span> <span class="s1">'35'</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s1">'logo'</span>
</code></pre>

<p>The list of defined helpers in the ‘asset helpers’ category:</p>

<ul>
  <li><code>flash_tag(kind, options={})</code>
    <ul>
      <li>Creates a div to display the flash of given type if it exists</li>
      <li><code>flash_tag(:notice, :class =&gt; ‘flash’, :id =&gt; ‘flash-notice’)</code></li>
    </ul>
  </li>
  <li><code>link_to(*args, &amp;block)</code>
    <ul>
      <li>Creates a link element with given name, url and options</li>
      <li><code>link_to ‘click me’, ‘/dashboard’, :class =&gt; ‘linky’</code></li>
      <li><code>link_to ‘click me’, ‘/dashboard’, :class =&gt; ‘linky’, :if =&gt; @foo.present?</code></li>
      <li><code>link_to ‘click me’, ‘/dashboard’, :class =&gt; ‘linky’, :unless =&gt; @foo.blank?</code></li>
      <li><code>link_to ‘click me’, ‘/dashboard’, :class =&gt; ‘linky’, :unless =&gt; :current</code></li>
      <li><code>link_to(‘/dashboard’, :class =&gt; ‘blocky’) { …content… }</code></li>
    </ul>
  </li>
  <li><code>mail_to(email, caption=nil, mail_options={})</code>
    <ul>
      <li>Creates a mailto link tag to the specified email_address</li>
      <li><code>mail_to “me@demo.com”</code></li>
      <li><code>mail_to “me@demo.com”, “My Email”, :subject =&gt; “Feedback”, :cc =&gt; ‘test@demo.com’</code></li>
    </ul>
  </li>
  <li><code>image_tag(url, options={})</code>
    <ul>
      <li>Creates an image element with given url and options</li>
      <li><code>image_tag(‘icons/avatar.png’)</code></li>
    </ul>
  </li>
  <li><code>stylesheet_link_tag(*sources)</code>
    <ul>
      <li>Returns a stylesheet link tag for the sources specified as arguments</li>
      <li><code>stylesheet_link_tag ‘style’, ‘application’, ‘layout’</code></li>
    </ul>
  </li>
  <li><code>javascript_include_tag(*sources)</code>
    <ul>
      <li>Returns an html script tag for each of the sources provided.</li>
      <li><code>javascript_include_tag ‘application’, ‘special’</code></li>
    </ul>
  </li>
  <li><code>favicon_tag(source, options={})</code>
    <ul>
      <li>Returns a favicon tag for the header for the source specified.</li>
      <li><code>favicon_tag ‘images/favicon.ico’, :type =&gt; ‘image/ico’</code></li>
    </ul>
  </li>
  <li><code>feed_tag(mime,source, options={})</code>
    <ul>
      <li>Returns a feed tag for the mime and source specified</li>
      <li><code>feed_tag :atom, url(:blog, :posts, :format =&gt; :atom), :title =&gt; “ATOM”</code></li>
    </ul>
  </li>
</ul>

<p>By default, all ‘assets’ including images, scripts, and stylesheets have a
timestamp appended at the end to clear the stale cache for the item when
modified. To disable this, simply put the setting <code>disable :asset_stamp</code> in your
application configuration within <code>app/app.rb</code>.</p>

<hr />

<h2 id="form-helpers">Form Helpers</h2>

<p>Form helpers are the ‘standard’ form tag helpers you would come to expect when
building forms. A simple example of constructing a non-object form would be:</p>

<pre class="highlight haml"><code># app/views/example.haml
<span class="p">=</span> <span class="n">form_tag</span> <span class="s1">'/destroy'</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s1">'destroy-form'</span><span class="p">,</span> <span class="ss">:method</span> <span class="o">=&gt;</span> <span class="s1">'delete'</span> <span class="k">do</span>
  <span class="p">=</span> <span class="n">flash_tag</span><span class="p">(</span><span class="ss">:notice</span><span class="p">)</span>
  <span class="p">=</span> <span class="n">field_set_tag</span> <span class="k">do</span>
    <span class="nt">%p</span>
      <span class="p">=</span> <span class="n">label_tag</span> <span class="ss">:username</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s1">'first'</span>
      <span class="p">=</span> <span class="n">text_field_tag</span> <span class="ss">:username</span><span class="p">,</span> <span class="ss">:value</span> <span class="o">=&gt;</span> <span class="n">params</span><span class="p">[</span><span class="ss">:username</span><span class="p">]</span>
    <span class="nt">%p</span>
      <span class="p">=</span> <span class="n">label_tag</span> <span class="ss">:password</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s1">'first'</span>
      <span class="p">=</span> <span class="n">password_field_tag</span> <span class="ss">:password</span><span class="p">,</span> <span class="ss">:value</span> <span class="o">=&gt;</span> <span class="n">params</span><span class="p">[</span><span class="ss">:password</span><span class="p">]</span>
    <span class="nt">%p</span>
      <span class="p">=</span> <span class="n">label_tag</span> <span class="ss">:strategy</span>
      <span class="p">=</span> <span class="n">select_tag</span> <span class="ss">:strategy</span><span class="p">,</span> <span class="ss">:options</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'delete'</span><span class="p">,</span> <span class="s1">'destroy'</span><span class="p">],</span> <span class="ss">:selected</span> <span class="o">=&gt;</span> <span class="s1">'delete'</span>
    <span class="nt">%p</span>
      <span class="p">=</span> <span class="n">check_box_tag</span> <span class="ss">:confirm_delete</span>
  <span class="p">=</span> <span class="n">field_set_tag</span><span class="p">(</span><span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s1">'buttons'</span><span class="p">)</span> <span class="k">do</span>
    <span class="p">=</span> <span class="n">submit_tag</span> <span class="s2">"Remove"</span>
</code></pre>

<p>The list of defined helpers in the ‘form helpers’ category:</p>

<ul>
  <li><code>form_tag(url, options={}, &amp;block)</code>
    <ul>
      <li>Constructs a form without object based on options</li>
      <li>Supports form methods ‘put’ and ‘delete’ through hidden field</li>
      <li><code>form_tag(‘/register’, :class =&gt; ‘example’) { … }</code></li>
    </ul>
  </li>
  <li><code>field_set_tag(*args, &amp;block)</code>
    <ul>
      <li>Constructs a field_set to group fields with given options</li>
      <li><code>field_set_tag(:class =&gt; ‘office-set’) { }</code></li>
      <li><code>field_set_tag(“Office”, :class =&gt; ‘office-set’) { }</code></li>
    </ul>
  </li>
  <li><code>error_messages_for(:record, options={})</code>
    <ul>
      <li>Constructs list html for the errors for a given object</li>
      <li><code>error_messages_for :user</code></li>
    </ul>
  </li>
  <li><code>label_tag(name, options={}, &amp;block)</code>
    <ul>
      <li>Constructs a label tag from the given options</li>
      <li><code>label_tag :username, :class =&gt; ‘long-label’</code></li>
      <li><code>label_tag(:username, :class =&gt; ‘blocked-label’) { … }</code></li>
    </ul>
  </li>
  <li><code>hidden_field_tag(name, options={})</code>
    <ul>
      <li>Constructs a hidden field input from the given options</li>
      <li><code>hidden_field_tag :session_key, :value =&gt; ‘secret’</code></li>
    </ul>
  </li>
  <li><code>text_field_tag(name, options={})</code>
    <ul>
      <li>Constructs a text field input from the given options</li>
      <li><code>text_field_tag :username, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>text_area_tag(name, options={})</code>
    <ul>
      <li>Constructs a text area input from the given options</li>
      <li><code>text_area_tag :username, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>password_field_tag(name, options={})</code>
    <ul>
      <li>Constructs a password field input from the given options</li>
      <li><code>password_field_tag :password, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>number_field_tag(name, options={})</code>
    <ul>
      <li>Constructs a number field input from the given options</li>
      <li><code>number_field_tag :age, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>telephone_field_tag(name, options={})</code>
    <ul>
      <li>Constructs a phone field input from the given options</li>
      <li><code>telephone_field_tag :mobile, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>email_field_tag(name, options={})</code>
    <ul>
      <li>Constructs a email field input from the given options</li>
      <li><code>email_field_tag :email, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>search_field_tag(name, options={})</code>
    <ul>
      <li>Constructs a search field input from the given options</li>
      <li><code>search_field_tag :query, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>url_field_tag(name, options={})</code>
    <ul>
      <li>Constructs a url field input from the given options</li>
      <li><code>url_field_tag :image_source_url, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>check_box_tag(name, options={})</code>
    <ul>
      <li>Constructs a checkbox input from the given options</li>
      <li><code>check_box_tag :remember_me, :checked =&gt; true</code></li>
    </ul>
  </li>
  <li><code>radio_button_tag(name, options={})</code>
    <ul>
      <li>Constructs a radio button input from the given options</li>
      <li><code>radio_button_tag :gender, :value =&gt; ‘male’</code></li>
    </ul>
  </li>
  <li><code>select_tag(name, settings={})</code>
    <ul>
      <li>Constructs a select tag with options from the given settings</li>
      <li><code>select_tag(:favorite_color, :options =&gt; [‘1’, ‘2’, ‘3’], :selected =&gt; ‘1’)</code></li>
      <li><code>select_tag(:more_color, :options =&gt; [[‘label’, ‘1’], [‘label2’, ‘2’]])</code></li>
      <li><code>select_tag(:multiple_color, :options =&gt; [‘1’, ‘2’, ‘3’], :multiple =&gt; true,
:selected =&gt; [‘1’, ‘3’])</code></li>
    </ul>
  </li>
  <li><code>file_field_tag(name, options={})</code>
    <ul>
      <li>Constructs a file field input from the given options</li>
      <li><code>file_field_tag :photo, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>submit_tag(caption, options={})</code>
    <ul>
      <li>Constructs a submit button from the given options</li>
      <li><code>submit_tag “Create”, :class =&gt; ‘success’</code></li>
    </ul>
  </li>
  <li><code>button_tag(caption, options={})</code>
    <ul>
      <li>Constructs an input (type =&gt; ‘button’) from the given options</li>
      <li><code>button_tag “Cancel”, :class =&gt; ‘clear’</code></li>
    </ul>
  </li>
  <li><code>image_submit_tag(source, options={})</code>
    <ul>
      <li>Constructs an image submit button from the given options</li>
      <li><code>image_submit_tag “submit.png”, :class =&gt; ‘success’</code></li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="formbuilders">FormBuilders</h2>

<p>Form builders are full-featured objects allowing the construction of complex
object-based forms using a simple, intuitive syntax.</p>

<p>A <code>form_for</code> using these basic fields might look like:</p>

<pre class="highlight haml"><code># app/views/example.haml
<span class="p">=</span> <span class="n">form_for</span> <span class="vi">@user</span><span class="p">,</span> <span class="s1">'/register'</span><span class="p">,</span> <span class="ss">:id</span> <span class="o">=&gt;</span> <span class="s1">'register'</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
  <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">error_messages</span>
  <span class="nt">%p</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:username</span><span class="p">,</span> <span class="ss">:caption</span> <span class="o">=&gt;</span> <span class="s2">"Nickname"</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:username</span>
  <span class="nt">%p</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:email</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:email</span>
  <span class="nt">%p</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:password</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">password_field</span> <span class="ss">:password</span>
  <span class="nt">%p</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:is_admin</span><span class="p">,</span> <span class="ss">:caption</span> <span class="o">=&gt;</span> <span class="s2">"Admin User?"</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">check_box</span> <span class="ss">:is_admin</span>
  <span class="nt">%p</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:color</span><span class="p">,</span> <span class="ss">:caption</span> <span class="o">=&gt;</span> <span class="s2">"Favorite Color?"</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">select</span> <span class="ss">:color</span><span class="p">,</span> <span class="ss">:options</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'red'</span><span class="p">,</span> <span class="s1">'black'</span><span class="p">]</span>
  <span class="nt">%p</span>
    <span class="p">=</span> <span class="n">fields_for</span> <span class="vi">@user</span><span class="p">.</span><span class="nf">location</span> <span class="k">do</span> <span class="o">|</span><span class="n">location</span><span class="o">|</span>
      <span class="p">=</span> <span class="n">location</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:street</span>
      <span class="p">=</span> <span class="n">location</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:city</span>
  <span class="nt">%p</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">submit</span> <span class="s2">"Create"</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s1">'button'</span>
</code></pre>

<p>The list of defined helpers in the ‘form builders’ category:</p>

<ul>
  <li><code>form_for(object, url, settings={}, &amp;block)</code>
    <ul>
      <li>Constructs a form using given or default form_builder</li>
      <li>Supports form methods ‘put’ and ‘delete’ through hidden field</li>
      <li>Defaults to StandardFormBuilder but you can easily create your own!</li>
      <li><code>form_for(@user, ‘/register’, :id =&gt; ‘register’) { |f| …field-elements… }</code></li>
      <li><code>form_for(:user, ‘/register’, :id =&gt; ‘register’) { |f| …field-elements… }</code></li>
    </ul>
  </li>
  <li><code>fields_for(object, settings={}, &amp;block)</code>
    <ul>
      <li>Constructs fields for a given object for use in an existing form</li>
      <li>Defaults to StandardFormBuilder but you can easily create your own!</li>
      <li><code>fields_for @user.assignment do |assignment| … end</code></li>
      <li><code>fields_for :assignment do |assigment| … end</code></li>
    </ul>
  </li>
</ul>

<p>The following are fields provided by AbstractFormBuilder that can be used within
a <code>form_for</code> or <code>fields_for</code>:</p>

<ul>
  <li><code>error_messages(options={})</code>
    <ul>
      <li>Displays list html for the errors on form object</li>
      <li><code>f.errors_messages</code></li>
    </ul>
  </li>
  <li><code>label(field, options={})</code>
    <ul>
      <li><code>f.label :name, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>text_field(field, options={})</code>
    <ul>
      <li><code>f.text_field :username, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>check_box(field, options={})</code>
    <ul>
      <li>Uses hidden field to provide a ‘unchecked’ value for field</li>
      <li><code>f.check_box :remember_me, :uncheck_value =&gt; ‘false’</code></li>
    </ul>
  </li>
  <li><code>radio_button(field, options={})</code>
    <ul>
      <li><code>f.radio_button :gender, :value =&gt; ‘male’</code></li>
    </ul>
  </li>
  <li><code>hidden_field(field, options={})</code>
    <ul>
      <li><code>f.hidden_field :session_id, :class =&gt; ‘hidden’</code></li>
    </ul>
  </li>
  <li><code>text_area(field, options={})</code>
    <ul>
      <li><code>f.text_area :summary, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>password_field(field, options={})</code>
    <ul>
      <li><code>f.password_field :secret, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>number_field(field, options={})</code>
    <ul>
      <li><code>f.number_field :age, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>telephone_field(field, options={})</code>
    <ul>
      <li><code>f.telephone_field :mobile, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>email_field(field, options={})</code>
    <ul>
      <li><code>f.email_field :email, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>search_field(field, options={})</code>
    <ul>
      <li><code>f.search_field :query, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>url_field(field, options={})</code>
    <ul>
      <li><code>f.url_field :image_source, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>file_field(field, options={})</code>
    <ul>
      <li><code>f.file_field :photo, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>select(field, options={})</code>
    <ul>
      <li><code>f.select(:state, :options =&gt; [‘California’, ‘Texas’, ‘Wyoming’])</code></li>
      <li><code>f.select(:state, :collection =&gt; @states, :fields =&gt; [:name, :id])</code></li>
      <li><code>f.select(:state, :options =&gt; […], :include_blank =&gt; true)</code></li>
    </ul>
  </li>
  <li><code>submit(caption, options={})</code>
    <ul>
      <li><code>f.submit “Update”, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
  <li><code>image_submit(source, options={})</code>
    <ul>
      <li><code>f.image_submit “submit.png”, :class =&gt; ‘long’</code></li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="standard-form-builder">Standard Form Builder</h2>

<p>There is also an additional StandardFormBuilder which builds on the abstract
fields that can be used within a form_for.</p>

<p>A <code>form_for</code> using these standard fields might be:</p>

<pre class="highlight haml"><code># app/views/example.haml
<span class="p">=</span> <span class="n">form_for</span> <span class="vi">@user</span><span class="p">,</span> <span class="s1">'/register'</span><span class="p">,</span> <span class="ss">:id</span> <span class="o">=&gt;</span> <span class="s1">'register'</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">error_messages</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field_block</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:caption</span> <span class="o">=&gt;</span> <span class="s2">"Full name"</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field_block</span> <span class="ss">:email</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">check_box_block</span>  <span class="ss">:remember_me</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">select_block</span>     <span class="ss">:fav_color</span><span class="p">,</span> <span class="ss">:options</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'red'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">]</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">password_field_block</span> <span class="ss">:password</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">submit_block</span> <span class="s2">"Create"</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s1">'button'</span>
</code></pre>

<p>and would generate this html (with each input contained in a paragraph and
containing a label):</p>

<pre class="highlight html"><code><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"register"</span> <span class="na">action=</span><span class="s">"/register"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"user_name"</span><span class="nt">&gt;</span>Full name:<span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"user_name"</span> <span class="na">name=</span><span class="s">"user[name]"</span> <span class="nt">/&gt;</span>
    ...omitted...
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Create"</span> <span class="na">class=</span><span class="s">"button"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre>

<p>The following are fields provided by StandardFormBuilder that can be used within
a form_for or fields_for:</p>

<ul>
  <li><code>text_field_block(field, options={}, label_options={})</code>
    <ul>
      <li><code>text_field_block(:nickname, :class =&gt; ‘big’, :caption =&gt; “Username”)</code></li>
    </ul>
  </li>
  <li><code>text_area_block(field, options={}, label_options={})</code>
    <ul>
      <li><code>text_area_block(:about, :class =&gt; ‘big’)</code></li>
    </ul>
  </li>
  <li><code>password_field_block(field, options={}, label_options={})</code>
    <ul>
      <li><code>password_field_block(:code, :class =&gt; ‘big’)</code></li>
    </ul>
  </li>
  <li><code>file_field_block(field, options={}, label_options={})</code>
    <ul>
      <li><code>file_field_block(:photo, :class =&gt; ‘big’)</code></li>
    </ul>
  </li>
  <li><code>check_box_block(field, options={}, label_options={})</code>
    <ul>
      <li><code>check_box_block(:remember_me, :class =&gt; ‘big’)</code></li>
    </ul>
  </li>
  <li><code>select_block(field, options={}, label_options={})</code>
    <ul>
      <li><code>select_block(:country, :option =&gt; [‘USA’, ‘Canada’])</code></li>
    </ul>
  </li>
  <li><code>submit_block(caption, options={})</code>
    <ul>
      <li><code>submit_block(:username, :class =&gt; ‘big’)</code></li>
    </ul>
  </li>
  <li><code>image_submit_block(source, options={})</code>
    <ul>
      <li><code>image_submit_block(‘submit.png’, :class =&gt; ‘big’)</code></li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="custom-form-builders">Custom Form Builders</h2>

<p>You can also easily build your own FormBuilder which allows for customized
fields and behavior:</p>

<pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">MyCustomFormBuilder</span> <span class="o">&lt;</span> <span class="no">AbstractFormBuilder</span>
  <span class="c1"># Here we have access to a number of useful variables</span>
  <span class="c1">#</span>
  <span class="c1"># ** template  (use this to invoke any helpers)(ex. template.hidden_field_tag(...))</span>
  <span class="c1"># ** object    (the record for this form) (ex. object.valid?)</span>
  <span class="c1"># ** object_name (object's underscored type) (ex. object_name =&gt; 'admin_user')</span>
  <span class="c1">#</span>
  <span class="c1"># We also have access to self.field_types =&gt; [:text_field, :text_area, ...]</span>
  <span class="c1"># In addition, we have access to all the existing field tag</span>
  <span class="c1"># helpers (text_field, hidden_field, file_field, ...)</span>
<span class="k">end</span>
</code></pre>

<p>Once a custom builder is defined, any call to form_for can use the new builder:</p>

<pre class="highlight haml"><code><span class="p">=</span> <span class="n">form_for</span> <span class="vi">@user</span><span class="p">,</span> <span class="s1">'/register'</span><span class="p">,</span> <span class="ss">:builder</span> <span class="o">=&gt;</span> <span class="s1">'MyCustomFormBuilder'</span><span class="p">,</span> <span class="ss">:id</span> <span class="o">=&gt;</span> <span class="s1">'register'</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
  ...fields here...
</code></pre>

<p>The form builder can even be made into the default builder when <code>form_for</code> is
invoked:</p>

<pre class="highlight ruby"><code><span class="c1"># anywhere in the Padrino or Sinatra application</span>
<span class="n">set</span> <span class="ss">:default_builder</span><span class="p">,</span> <span class="s1">'MyCustomFormBuilder'</span>
</code></pre>

<p>And there you have it, a fairly complete form builder solution for Padrino (and
Sinatra). I hope to create or merge in an even better ‘default’ form_builder in
the near future.</p>

<hr />

<h2 id="nested-object-form-support">Nested Object Form Support</h2>

<p>Available in the 0.9.21 Padrino release is support for nested object form
helpers. This allows forms to have arbitrarily complex nested forms that can
build multiple related objects together. Let’s take a simple example of a person
with an address. Here are the related pseudo models:</p>

<pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">Person</span> <span class="o">&lt;</span> <span class="no">ORM</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">has_many</span> <span class="ss">:addresses</span><span class="p">,</span> <span class="ss">:class_name</span> <span class="o">=&gt;</span> <span class="s1">'Address'</span>
  <span class="n">accepts_nested_attributes_for</span> <span class="ss">:addresses</span><span class="p">,</span> <span class="ss">:allow_destroy</span> <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Address</span> <span class="o">&lt;</span> <span class="no">ORM</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">belongs_to</span> <span class="ss">:person</span>
<span class="k">end</span>
</code></pre>

<p>The model declarations are dependent on your chosen ORM. Check the documentation
to understand how to declare nested attributes in your given ORM component.
Given those models and enabling nested attributes for the association, the
following view will allow nested form creation:</p>

<pre class="highlight haml"><code># app/views/person/_form.html.haml
<span class="p">=</span> <span class="n">form_for</span> <span class="vi">@person</span><span class="p">,</span> <span class="s1">'/person/create'</span>  <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
  <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:name</span>
  <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:favorite_color</span>
  <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">fields_for</span> <span class="ss">:addresses</span> <span class="k">do</span> <span class="o">|</span><span class="n">address_form</span><span class="o">|</span>
    <span class="p">=</span> <span class="n">address_form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:street</span>
    <span class="p">=</span> <span class="n">address_form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:street</span>
    <span class="p">=</span> <span class="n">address_form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:city</span>
    <span class="p">=</span> <span class="n">address_form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:city</span>
    <span class="p">-</span> <span class="k">unless</span> <span class="n">address_form</span><span class="p">.</span><span class="nf">object</span><span class="p">.</span><span class="nf">new_record?</span>
      <span class="p">=</span> <span class="n">address_form</span><span class="p">.</span><span class="nf">check_box</span> <span class="s1">'_destroy'</span>
      <span class="p">=</span> <span class="n">address_form</span><span class="p">.</span><span class="nf">label</span> <span class="s1">'_destroy'</span><span class="p">,</span> <span class="ss">:caption</span> <span class="o">=&gt;</span> <span class="s1">'Remove'</span>
    <span class="p">=</span> <span class="n">submit_tag</span> <span class="s2">"Save"</span>
</code></pre>

<p>This will present a form that allows the person’s name and color to be set along
with their first address. Using this functionality, the controller does not need
to change whatsoever as the nested data will be passed in and instantiated as
part of the parent model.</p>

<hr />

<h2 id="format-helpers">Format Helpers</h2>

<p>Format helpers are several useful utilities for manipulating the format of text
 to achieve a goal. The four format helpers are <code>escape_html</code>,
 <code>distance_of_time_in_words</code>, <code>time_ago_in_words</code>, and <code>js_escape_html</code>.</p>

<p>The <code>escape_html</code> and <code>js_escape_html</code> function are for taking an html string and
escaping certain characters. <code>escape_html</code> will escape ampersands, brackets and
quotes to their HTML/XML entities. This is useful to sanitize user content
before displaying this on a template. <code>js_escape_html</code> is used for passing
javascript information from a js template to a javascript function.</p>

<pre class="highlight ruby"><code><span class="n">escape_html</span><span class="p">(</span><span class="s1">'&lt;hello&gt;&amp;&lt;goodbye&gt;'</span><span class="p">)</span> <span class="c1"># =&gt; &amp;lt;hello&amp;gt;&amp;amp;&amp;lt;goodbye&amp;gt;</span>
</code></pre>

<p>There is also an alias for <code>escape_html</code> called <code>h</code> for even easier usage within
templates.</p>

<p>Format helpers also includes a number of useful text manipulation functions such
as <code>simple_format</code>, <code>pluralize</code>, <code>word_wrap</code>, and <code>truncate</code>.</p>

<pre class="highlight ruby"><code><span class="n">simple_format</span><span class="p">(</span><span class="s2">"hello</span><span class="se">\n</span><span class="s2">world"</span><span class="p">)</span> <span class="c1"># =&gt; "&lt;p&gt;hello&lt;br/&gt;world&lt;/p&gt;"</span>
<span class="n">pluralize</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">'person'</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s1">'2 people'</span>
<span class="n">word_wrap</span><span class="p">(</span><span class="s1">'Once upon a time'</span><span class="p">,</span> <span class="ss">:line_width</span> <span class="o">=&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s2">"Once upon</span><span class="se">\n</span><span class="s2">a time"</span>
<span class="n">truncate</span><span class="p">(</span><span class="s2">"Once upon a time in a world far far away"</span><span class="p">,</span> <span class="ss">:length</span> <span class="o">=&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s2">"Once upon..."</span>
<span class="n">truncate_words</span><span class="p">(</span><span class="s2">"Once upon a time in a world far far away"</span><span class="p">,</span> <span class="ss">:length</span> <span class="o">=&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s2">"Once upon a time..."</span>
<span class="n">highlight</span><span class="p">(</span><span class="s1">'Lorem dolor sit'</span><span class="p">,</span> <span class="s1">'dolor'</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s2">"Lorem &lt;strong class="</span><span class="n">highlight</span><span class="s2">"&gt;dolor&lt;/strong&gt; sit"</span>
</code></pre>

<p>These helpers can be invoked from any route or view within your application.</p>

<p>The list of defined helpers in the ‘format helpers’ category:</p>

<ul>
  <li><code>simple_format(text, html_options)</code>
    <ul>
      <li>Returns text transformed into HTML using simple formatting rules.</li>
      <li><code>simple_format(“hello\nworld”)</code> =&gt; <code>"&lt;p&gt;hello&lt;br/&gt;world&lt;/p&gt;"</code></li>
    </ul>
  </li>
  <li><code>pluralize(count, singular, plural = nil)</code>
    <ul>
      <li>Attempts to pluralize the singular word unless count is 1.</li>
      <li><code>pluralize(2, ‘person’)</code> =&gt; ‘2 people’</li>
    </ul>
  </li>
  <li><code>word_wrap(text, *args)</code>
    <ul>
      <li>Wraps the text into lines no longer than line_width width.</li>
      <li><code>word_wrap(‘Once upon a time’, :line_width =&gt; 8)</code> =&gt; “Once upon\na time”</li>
    </ul>
  </li>
  <li><code>truncate(text, *args)</code>
    <ul>
      <li>Truncates a given text after a given :length if text is longer than :length
(defaults to 30).</li>
      <li><code>truncate(“Once upon a time in a world far far away”, :length =&gt; 8)</code> =&gt;
“Once upon…”</li>
    </ul>
  </li>
  <li><code>truncate_words(text, *args)</code>
    <ul>
      <li>Truncates a given text after a given :length of total words (defaults to
30).</li>
      <li>truncate_words(“Once upon a time in a world far far away”, :length =&gt; 4)
=&gt; “Once upon a time…”</li>
    </ul>
  </li>
  <li><code>highlight(text, words, *args)</code>
    <ul>
      <li>Highlights one or more words everywhere in text by inserting it into a
:highlighter string.</li>
      <li><code>highlight(‘Lorem ipsum dolor sit amet’, ‘dolor’)</code></li>
    </ul>
  </li>
  <li><code>escape_html</code> (alias <code>h</code> and <code>h!</code>)
    <ul>
      <li>(from RackUtils) Escape ampersands, brackets and quotes to their HTML/XML
entities.</li>
    </ul>
  </li>
  <li><code>strip_tags(html)</code>
    <ul>
      <li>Remove all html tags and return only a clean text.</li>
    </ul>
  </li>
  <li><code>distance_of_time_in_words(from_time, to_time = 0)</code>
    <ul>
      <li>Returns relative time in words referencing the given date</li>
      <li><code>distance_of_time_in_words(2.days.ago)</code> =&gt; “2 days”</li>
      <li><code>distance_of_time_in_words(5.minutes.ago)</code> =&gt; “5 minutes”</li>
      <li><code>distance_of_time_in_words(2800.days.ago)</code> =&gt; “over 7 years”</li>
    </ul>
  </li>
  <li><code>time_ago_in_words(from_time)</code>
    <ul>
      <li>Returns relative time in words from the current date</li>
      <li><code>time_ago_in_words(2.days.ago)</code> =&gt; “2 days”</li>
      <li><code>time_ago_in_words(1.day.from_now)</code> =&gt; “tomorrow”</li>
    </ul>
  </li>
  <li><code>js_escape_html(html_content)</code>
    <ul>
      <li>Escapes html to allow passing information to javascript. Used for passing
data inside an ajax .js.erb template</li>
      <li><code>js_escape_html("&lt;h1&gt;Hey&lt;/h1&gt;")</code></li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="render-helpers">Render Helpers</h2>

<p>This component provides a number of rendering helpers making the process of
displaying templates a bit easier. This plugin also has support for useful
additions such as partials (with support for <code>:collection</code>) for the templating
system.</p>

<p>Using render plugin helpers is extremely simple. If you want to render an erb
template in your view path:</p>

<pre class="highlight ruby"><code><span class="n">render</span> <span class="ss">:erb</span><span class="p">,</span> <span class="s1">'path/to/erb/template'</span>
</code></pre>

<p>or using haml templates works just as well:</p>

<pre class="highlight ruby"><code><span class="n">render</span> <span class="ss">:haml</span><span class="p">,</span> <span class="s1">'path/to/haml/template'</span>
</code></pre>

<p>There is also a method which renders the first view matching the path and
removes the need to define an engine:</p>

<pre class="highlight ruby"><code><span class="n">render</span> <span class="s1">'path/to/any/template'</span>
</code></pre>

<p>It is worth noting these are mostly for convenience. With nested view file paths
in Sinatra, this becomes tiresome:</p>

<pre class="highlight ruby"><code><span class="n">haml</span> <span class="ss">:"the/path/to/file"</span>
<span class="n">erb</span> <span class="s2">"/path/to/file"</span><span class="p">.</span><span class="nf">to_sym</span>
</code></pre>

<p>Finally, we have the all-important partials support for rendering mini-templates
onto a page:</p>

<pre class="highlight ruby"><code><span class="n">partial</span> <span class="s1">'photo/item'</span><span class="p">,</span> <span class="ss">:object</span> <span class="o">=&gt;</span> <span class="vi">@photo</span><span class="p">,</span> <span class="ss">:locals</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">:foo</span> <span class="o">=&gt;</span> <span class="s1">'bar'</span> <span class="p">}</span>
<span class="n">partial</span> <span class="s1">'photo/item'</span><span class="p">,</span> <span class="ss">:collection</span> <span class="o">=&gt;</span> <span class="vi">@photos</span>
</code></pre>

<p>This works as you would expect and also supports the collection counter inside
the partial <code>item_counter</code></p>

<pre class="highlight ruby"><code><span class="c1"># /views/photo/_item.haml</span>
<span class="c1"># Access to collection counter with &lt;partial_name&gt;_counter i.e item_counter</span>
<span class="c1"># Access the object with the partial_name i.e item</span>
</code></pre>

<p>The list of defined helpers in the ‘render helpers’ category:</p>

<ul>
  <li><code>render(engine, data, options, locals)</code>
    <ul>
      <li>Renders the specified template with the given options</li>
      <li><code>render ‘user/new’</code></li>
      <li><code>render :erb, ‘users/new’, :layout =&gt; false</code></li>
    </ul>
  </li>
  <li><code>partial(template, *args)</code>
    <ul>
      <li>Renders the html related to the partial template for object or collection</li>
      <li><code>partial ‘photo/item’, :object =&gt; @photo, :locals =&gt; { :foo =&gt; ‘bar’ }</code></li>
      <li><code>partial ‘photo/item’, :collection =&gt; @photos</code></li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="custom-defined-helpers">Custom Defined Helpers</h2>

<p>In addition to the helpers provided by Padrino out of the box, you can also add
your own helper methods and classes that will be accessible within any
controller or view automatically.</p>

<p>To define a helper method, simply use an existing helper file (created when
generating a controller) or define your own file in <code>app/helpers</code> within your
application. Methods can be made available within you controller by simply
wrapping the methods in the <code>helpers</code> block:</p>

<pre class="highlight ruby"><code><span class="c1"># app/helpers/some_helper.rb</span>
<span class="no">MyAppName</span><span class="p">.</span><span class="nf">helpers</span> <span class="k">do</span>
  <span class="k">def</span> <span class="nf">some_method</span>
    <span class="c1"># ...do something here...</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<p>You can also define entire classes for use as helpers just as easily:</p>

<pre class="highlight ruby"><code><span class="c1"># app/helpers/some_helper.rb</span>
<span class="k">class</span> <span class="nc">SomeHelper</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">do_something</span>
    <span class="c1"># ...do something here...</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<p>These helpers can then easily be invoked in any controllers or templates within
your application:</p>

<pre class="highlight ruby"><code><span class="c1"># app/controllers/posts.rb</span>
<span class="no">MyAppName</span><span class="p">.</span><span class="nf">controllers</span> <span class="ss">:posts</span> <span class="k">do</span>
  <span class="n">get</span> <span class="ss">:index</span> <span class="k">do</span>
    <span class="n">some_method</span> <span class="c1"># helper method</span>
    <span class="no">SomeHelper</span><span class="p">.</span><span class="nf">do_something</span> <span class="c1"># helper class</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<p>Use these in situations where you wish to cleanup your controller or your view
code. Helpers are particularly useful for DRY’ing up repeated use of the same
markup or behavior. <strong>Note</strong> that helper methods and objects should be reloaded
automatically for you in development.</p>

<hr />

<h2 id="unobtrusive-javascript-helpers">Unobtrusive Javascript Helpers</h2>

<p>In addition to the helpers above, certain helpers also have certain unobtrusive
javascript options that are available to be used with any of the javascript
adapters packaged with padrino. Once your app has been
<a title="generated" href="/guides/generators">generated</a> with a particular
javascript adapter, you can utilize the baked in support with the <code>link_to</code> and
<code>form_for</code> tags.</p>

<hr />

<h2 id="remote-forms">Remote Forms</h2>

<p>To generate a ‘remote’ form in a view:</p>

<pre class="highlight haml"><code># /app/views/users/new.html.haml
<span class="p">=</span> <span class="n">form_for</span> <span class="ss">:user</span><span class="p">,</span> <span class="n">url</span><span class="p">(</span><span class="ss">:create</span><span class="p">,</span> <span class="ss">:format</span> <span class="o">=&gt;</span> <span class="ss">:js</span><span class="p">),</span> <span class="ss">:remote</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
  <span class="nc">.content</span><span class="p">=</span><span class="n">partial</span> <span class="s2">"/users/form"</span>
</code></pre>

<p>which will generate the following unobtrusive markup:</p>

<pre class="highlight html"><code><span class="nt">&lt;form</span> <span class="na">data-remote=</span><span class="s">"true"</span> <span class="na">action=</span><span class="s">"/items/create.js"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"content"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"post_title"</span> <span class="na">name=</span><span class="s">"post[title]"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Create"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre>

<pre class="highlight ruby"><code><span class="c1"># /app/controllers/users.rb</span>
<span class="n">post</span> <span class="ss">:create</span><span class="p">,</span> <span class="ss">:provides</span> <span class="o">=&gt;</span> <span class="ss">:js</span> <span class="k">do</span>
  <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:user</span><span class="p">])</span>
  <span class="k">if</span> <span class="vi">@user</span><span class="p">.</span><span class="nf">save</span>
    <span class="s2">"$('form.content').html('</span><span class="si">#{</span><span class="n">partial</span><span class="p">(</span><span class="s2">"/users/form"</span><span class="p">)</span><span class="si">}</span><span class="s2">');"</span>
  <span class="k">else</span>
    <span class="s2">"alert('User is not valid');"</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<p>A remote form, when submitted by the user, invokes an xhr request to the
specified url (with the appropriate form parameters) and then evaluates the
response as javascript.</p>

<hr />

<h2 id="remote-links">Remote Links</h2>

<p>To generate a ‘remote’ link in a view:</p>

<pre class="highlight ruby"><code><span class="n">link_to</span> <span class="s2">"add item"</span><span class="p">,</span> <span class="n">url</span><span class="p">(</span><span class="ss">:items</span><span class="p">,</span> <span class="ss">:new</span><span class="p">,</span> <span class="ss">:format</span> <span class="o">=&gt;</span> <span class="ss">:js</span><span class="p">),</span> <span class="ss">:remote</span> <span class="o">=&gt;</span> <span class="kp">true</span>
</code></pre>

<p>which will generate the following unobtrusive markup:</p>

<pre class="highlight html"><code><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/items/new.js"</span> <span class="na">data-remote=</span><span class="s">"true"</span><span class="nt">&gt;</span>add item<span class="nt">&lt;/a&gt;</span>
</code></pre>

<p>A remote link, when clicked by the user, invokes an xhr request to the specified
url and then evaluates the response as javascript.</p>

<hr />

<h2 id="link-confirmations">Link Confirmations</h2>

<p>To generate a ‘confirmation’ link in a view:</p>

<pre class="highlight ruby"><code><span class="n">link_to</span> <span class="s2">"delete item"</span><span class="p">,</span> <span class="n">url</span><span class="p">(</span><span class="ss">:items</span><span class="p">,</span> <span class="ss">:destroy</span><span class="p">,</span> <span class="ss">:format</span> <span class="o">=&gt;</span> <span class="ss">:js</span><span class="p">),</span> <span class="ss">:confirm</span> <span class="o">=&gt;</span> <span class="s2">"Are You Sure?"</span>
</code></pre>

<p>which will generate the following unobtrusive markup:</p>

<pre class="highlight html"><code><span class="nt">&lt;a</span> <span class="na">data-confirm=</span><span class="s">"Are You Sure?"</span> <span class="na">href=</span><span class="s">"/posts/destroy/7"</span><span class="nt">&gt;</span>[destroy]<span class="nt">&lt;/a&gt;</span>
</code></pre>

<p>A link with confirmation, when clicked by the user, displays an alert box
confirming the action before invoking the link.</p>

<hr />

<h2 id="custom-method-links">Custom Method Links</h2>

<p>To generate a ‘method’ link in a view:</p>

<pre class="highlight ruby"><code><span class="n">link_to</span> <span class="s2">"logout"</span><span class="p">,</span> <span class="n">url</span><span class="p">(</span><span class="ss">:session</span><span class="p">,</span> <span class="ss">:destroy</span><span class="p">,</span> <span class="ss">:format</span> <span class="o">=&gt;</span> <span class="ss">:js</span><span class="p">),</span> <span class="ss">:method</span> <span class="o">=&gt;</span> <span class="ss">:delete</span>
</code></pre>

<p>which will generate the following unobtrusive markup:</p>

<pre class="highlight html"><code><span class="nt">&lt;a</span> <span class="na">data-method=</span><span class="s">"delete"</span> <span class="na">href=</span><span class="s">"/posts/destroy/7"</span> <span class="na">rel=</span><span class="s">"nofollow"</span><span class="nt">&gt;</span>[destroy]<span class="nt">&lt;/a&gt;</span>
</code></pre>

<p>A link with a custom method, when clicked by the user, visits the link using the
http method specified rather than via the ‘GET’ method.</p>

<hr />

<h2 id="enabling-ujs-adapter">Enabling UJS Adapter</h2>

<p><strong>Note</strong>: In order for the unobstrusive javascript to work, you must be sure to
  include the chosen javascript framework and ujs adapter in your views (or
  layout). For instance, if I selected jquery for my project:</p>

<pre class="highlight haml"><code><span class="c">-# /apps/views/layouts/application.haml
</span><span class="p">=</span> <span class="n">javascript_include_tag</span> <span class="s1">'jquery'</span><span class="p">,</span> <span class="s1">'jquery-ujs'</span><span class="p">,</span> <span class="s1">'application'</span>
</code></pre>

<p>This will ensure jquery and the jquery ujs adapter are properly loaded to work
with the helpers listed above.</p>

<p class="excerpt"><a class="button" href="/guides/padrino-admin">Next Section – Padrino Admin</a></p>

</div></div></div><hr /><footer class="footer"><p>Padrino is released under the MIT LICENSE<br />
Hosting by <a href="https://pages.github.com">GitHub Pages</a></p>
</footer><script src="../../assets/javascripts/all-c2e0cecd.js"></script></div></body></html>
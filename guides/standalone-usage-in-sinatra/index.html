<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="initial-scale=1" name="viewport" /><title>Padrino - Standalone Usage in Sinatra</title><link href="/assets/favicon.ico" rel="icon" type="image/ico" /><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" /><link href="../../assets/stylesheets/style-75d468d0.css" rel="stylesheet" /></head><body class="guides guides_standalone-usage-in-sinatra guides_standalone-usage-in-sinatra_index"><div class="grid"><header class="header"><h1 class="header__name"><a class="padrino-name" href="/">Padrino</a></h1><div class="header__navigation"><nav class="navigation"><a class="navigation__toggler" href="#" id="navigation__toggler"><span class="navigation__toggler__icon fa fa-navicon"></span></a><ul class="navigation__items" id="navigation__items"><li class="navigation__item"><a class="navigation__link" href="/">Overview</a></li><li class="navigation__item"><a class="navigation__link--is-active" href="/guides/">Guides</a></li><li class="navigation__item"><a class="navigation__link" href="/blog/">Blog</a></li><li class="navigation__item"><a class="navigation__link" href="http://www.rubydoc.info/github/padrino/padrino-framework">API</a></li><li class="navigation__item"><a class="navigation__link" href="/contribute/">Contribute</a></li><li class="navigation__item"><a class="navigation__link" href="https://github.com/padrino/padrino-framework"><span class="button--slim">GitHub</span></a></li></ul></nav></div></header><div class="page"><div class="page__sidebar"><div class="sidebar"><h4 class="sidebar__header--first">Guides</h4><ul class="sidebar__items"><li class="sidebar__item"><a class="sidebar__link" href="/guides/">Home</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/getting-started/">Getting Started</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/installation/">Installation</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/basic-projects/">Basic Projects</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/generators/">Generators</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/development-commands/">Development Commands</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/mounting-applications/">Mounting Applications</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/blog-tutorial/">Blog Tutorial</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/application-helpers/">Application Helpers</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/padrino-admin/">Padrino Admin</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/padrino-mailer/">Padrino Mailer</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/padrino-cache/">Padrino Cache</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/controllers/">Controllers</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/localization/">Localization</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/extensions/">Extensions</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/rake-tasks/">Rake Tasks</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/the-bleeding-edge/">The Bleeding Edge</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/adding-new-components/">Adding New Components</a></li><li class="sidebar__item"><a class="sidebar__link--is-active" href="/guides/standalone-usage-in-sinatra/">Standalone Usage in Sinatra</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/running-padrino-on-jruby/">Running Padrino on JRuby</a></li></ul></div></div><div class="page__content"><div class="content"><h1 id="standalone-usage-in-sinatra">Standalone Usage in Sinatra</h1>

<p>Padrino is by default a full-stack framework which provides a large number of
enhancements to Sinatra and uses a new base application <code>Padrino::Application</code>.
However, there are clearly times when even Padrino itself is far too
‘heavyweight’ for an application.</p>

<p>In these instances, the ideal situation would be to cherry-pick individual
enhancements and use them in your existing Sinatra application. Fortunately,
Padrino is committed to allowing you to do exactly that! Each major component
within Padrino can be used in isolation and applied to an existing Sinatra
application. This guide will walk you through that process for each component.
You can also find some examples
<a title="link to padrino single-apps" href="https://github.com/padrino/padrino-integration/tree/master/fixtures/single-apps">here</a>.</p>

<hr />

<h2 id="padrino-helpers">Padrino Helpers</h2>

<p>This component provides a great deal of view helpers related to html markup
generation. There are helpers for generating tags, forms, links, images, and
more. Most of the basic methods should be very familiar to anyone who has used
rails view helpers.</p>

<p>You can check out the details of these helpers in the
<a title="Application Helpers guide" href="/guides/application-helpers">Application Helpers</a> guide. To register these
helpers within your Sinatra application:</p>

<pre class="highlight ruby"><code><span class="c1"># app.rb</span>
<span class="nb">require</span> <span class="s1">'sinatra/base'</span>
<span class="nb">require</span> <span class="s1">'padrino-helpers'</span>

<span class="k">class</span> <span class="nc">Application</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">register</span> <span class="no">Padrino</span><span class="o">::</span><span class="no">Helpers</span>
<span class="k">end</span>
</code></pre>

<hr />

<h2 id="padrino-mailer">Padrino Mailer</h2>

<p>This component provides a powerful but simple mail delivery system within
Padrino (and Sinatra). There is full support for using an html content type as
well as for file attachments. The Padrino Mailer has many similarities to
ActionMailer but is much lighter-weight and easier to use.</p>

<p>You can check out the details of the mailer in the
<a title="Padrino Mailer guide" href="/guides/padrino-mailer">Padrino Mailer</a> guide. To register this mailer within
your Sinatra application:</p>

<pre class="highlight ruby"><code><span class="c1"># app.rb</span>
<span class="nb">require</span> <span class="s1">'sinatra/base'</span>
<span class="nb">require</span> <span class="s1">'padrino-mailer'</span>

<span class="k">class</span> <span class="nc">Application</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">register</span> <span class="no">Padrino</span><span class="o">::</span><span class="no">Mailer</span>

  <span class="n">mailer</span> <span class="ss">:sample</span> <span class="k">do</span>
    <span class="n">email</span> <span class="ss">:birthday</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="p">,</span> <span class="n">age</span><span class="o">|</span>
      <span class="n">subject</span> <span class="s1">'Happy Birthday!'</span>
      <span class="n">to</span>      <span class="s1">'john@fake.com'</span>
      <span class="n">from</span>    <span class="s1">'noreply@birthday.com'</span>
      <span class="n">locals</span>  <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="nb">name</span><span class="p">,</span> <span class="ss">:age</span> <span class="o">=&gt;</span> <span class="n">age</span>
      <span class="n">render</span>  <span class="s1">'sample/birthday'</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<hr />

<h2 id="padrino-routing">Padrino Routing</h2>

<p>You can check out the details of the routing system in the
<a href="/guides/controllers">Routing</a> guide. To register the routing and controller
functionality within your Sinatra application:</p>

<pre class="highlight ruby"><code><span class="c1"># app.rb</span>
<span class="nb">require</span> <span class="s1">'sinatra/base'</span>
<span class="nb">require</span> <span class="s1">'padrino-core/application/routing'</span>
<span class="c1">#</span>
<span class="c1"># Small example that show you some padrino routes.</span>
<span class="c1"># Point your browser to:</span>
<span class="c1">#</span>
<span class="c1">#   http://localhost:3000</span>
<span class="c1">#   http://localhost:3000/bar</span>
<span class="c1">#   http://localhost:3000/bar.js</span>
<span class="c1">#   http://localhost:3000/custom-route/123</span>
<span class="c1">#</span>
<span class="c1"># These routes didn't works:</span>
<span class="c1">#</span>
<span class="c1">#   http://localhost:3000/bar.xml</span>
<span class="c1">#   http://localhost:3000/bar.jsl</span>
<span class="c1">#   http://localhost:3000/custom-route</span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">MyApp</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Application</span>
  <span class="n">register</span> <span class="no">Padrino</span><span class="o">::</span><span class="no">Routing</span>

  <span class="n">get</span> <span class="ss">:foo</span><span class="p">,</span> <span class="ss">:map</span> <span class="o">=&gt;</span> <span class="s2">"/"</span> <span class="k">do</span>
    <span class="s2">"This is foo mapped as index"</span>
  <span class="k">end</span>

  <span class="n">get</span> <span class="ss">:bar</span><span class="p">,</span> <span class="ss">:provides</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="ss">:js</span><span class="p">,</span> <span class="ss">:html</span><span class="p">]</span> <span class="k">do</span>
    <span class="k">case</span> <span class="n">content_type</span>
      <span class="k">when</span> <span class="ss">:js</span>   <span class="k">then</span> <span class="s2">"Bar for js"</span>
      <span class="k">when</span> <span class="ss">:html</span> <span class="k">then</span> <span class="s2">"Bar for html"</span>
      <span class="k">else</span> <span class="s2">"You can never see this"</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">get</span> <span class="ss">:custom</span><span class="p">,</span> <span class="ss">:map</span> <span class="o">=&gt;</span> <span class="s1">'/custom-route'</span><span class="p">,</span> <span class="ss">:with</span> <span class="o">=&gt;</span> <span class="ss">:id</span> <span class="k">do</span>
    <span class="s2">"This is a custom route with </span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">]</span><span class="si">}</span><span class="s2"> as params[:id]"</span>
  <span class="k">end</span>
<span class="k">end</span> <span class="c1"># MyApp</span>

<span class="no">MyApp</span><span class="p">.</span><span class="nf">run!</span><span class="p">(</span><span class="ss">:port</span> <span class="o">=&gt;</span> <span class="mi">3000</span><span class="p">)</span>
</code></pre>

<hr />

<h2 id="padrino-rendering">Padrino Rendering</h2>

<p>Padrino enhances the Sinatra ‘render’ method to have support for automatic
template engine detection, among other more advanced features.</p>

<pre class="highlight ruby"><code><span class="c1"># app.rb</span>
<span class="nb">require</span> <span class="s1">'sinatra/base'</span>
<span class="nb">require</span> <span class="s1">'padrino-core/application/rendering'</span>

<span class="k">class</span> <span class="nc">Application</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">register</span> <span class="no">Padrino</span><span class="o">::</span><span class="no">Rendering</span>

  <span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>  <span class="p">{</span> <span class="n">render</span> <span class="s1">'example/demo'</span> <span class="p">}</span> <span class="c1"># Auto-renders 'views/example/demo.haml'</span>
  <span class="n">get</span><span class="p">(</span><span class="s1">'/demo'</span><span class="p">)</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:haml</span><span class="p">,</span> <span class="s1">'example/demo'</span> <span class="p">}</span> <span class="c1"># Renders 'views/example/demo.haml'</span>
<span class="k">end</span>
</code></pre>

<hr />

<h2 id="padrino-cache">Padrino Cache</h2>

<p><strong>Note that the padrino-cache</strong> gem does not currently do anything! This is a placeholder for when this gem has been implemented.</p>

<pre class="highlight ruby"><code><span class="c1"># app.rb</span>
<span class="nb">require</span> <span class="s1">'sinatra/base'</span>
<span class="nb">require</span> <span class="s1">'padrino-cache'</span>

<span class="k">class</span> <span class="nc">Application</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">register</span> <span class="no">Padrino</span><span class="o">::</span><span class="no">Cache</span>
<span class="k">end</span>
</code></pre>

<p>This will allow for use of the caching functionality within Sinatra.</p>

<p class="excerpt"><a class="button" href="/guides/running-padrino-on-jruby">Next Section – Running Padrino on JRuby</a></p>
</div></div></div><hr /><footer class="footer"><p>Padrino is released under the MIT LICENSE<br />
Hosting by <a href="https://pages.github.com">GitHub Pages</a></p>
</footer><script src="../../assets/javascripts/all-c2e0cecd.js"></script></div></body></html>
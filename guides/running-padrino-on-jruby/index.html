<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="initial-scale=1" name="viewport" /><title>Padrino - Running Padrino on JRuby</title><link href="/assets/favicon.ico" rel="icon" type="image/ico" /><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" /><link href="../../assets/stylesheets/style-75d468d0.css" rel="stylesheet" /></head><body class="guides guides_running-padrino-on-jruby guides_running-padrino-on-jruby_index"><div class="grid"><header class="header"><h1 class="header__name"><a class="padrino-name" href="/">Padrino</a></h1><div class="header__navigation"><nav class="navigation"><a class="navigation__toggler" href="#" id="navigation__toggler"><span class="navigation__toggler__icon fa fa-navicon"></span></a><ul class="navigation__items" id="navigation__items"><li class="navigation__item"><a class="navigation__link" href="/">Overview</a></li><li class="navigation__item"><a class="navigation__link--is-active" href="/guides/">Guides</a></li><li class="navigation__item"><a class="navigation__link" href="/blog/">Blog</a></li><li class="navigation__item"><a class="navigation__link" href="http://www.rubydoc.info/github/padrino/padrino-framework">API</a></li><li class="navigation__item"><a class="navigation__link" href="/contribute/">Contribute</a></li><li class="navigation__item"><a class="navigation__link" href="https://github.com/padrino/padrino-framework"><span class="button--slim">GitHub</span></a></li></ul></nav></div></header><div class="page"><div class="page__sidebar"><div class="sidebar"><h4 class="sidebar__header--first">Guides</h4><ul class="sidebar__items"><li class="sidebar__item"><a class="sidebar__link" href="/guides/">Home</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/getting-started/">Getting Started</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/installation/">Installation</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/basic-projects/">Basic Projects</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/generators/">Generators</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/development-commands/">Development Commands</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/mounting-applications/">Mounting Applications</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/blog-tutorial/">Blog Tutorial</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/application-helpers/">Application Helpers</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/padrino-admin/">Padrino Admin</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/padrino-mailer/">Padrino Mailer</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/padrino-cache/">Padrino Cache</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/controllers/">Controllers</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/localization/">Localization</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/extensions/">Extensions</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/rake-tasks/">Rake Tasks</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/the-bleeding-edge/">The Bleeding Edge</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/adding-new-components/">Adding New Components</a></li><li class="sidebar__item"><a class="sidebar__link" href="/guides/standalone-usage-in-sinatra/">Standalone Usage in Sinatra</a></li><li class="sidebar__item"><a class="sidebar__link--is-active" href="/guides/running-padrino-on-jruby/">Running Padrino on JRuby</a></li></ul></div></div><div class="page__content"><div class="content"><h1 id="running-padrino-on-jruby">Running Padrino on JRuby</h1>

<p>You can run Padrino (0.9.29 / 0.10.3 is tested) on JRuby 1.6.4.</p>

<hr />

<h2 id="install-on-jruby">Install on JRuby</h2>

<p>You can easily install Padrino on jruby when you use <a title="RVM" href="https://rvm.io/rvm/install">RVM</a>:</p>

<pre class="highlight shell"><code><span class="gp">$ </span>rvm use --create jruby-1.6.4@padrino
<span class="gp">$ </span>gem install padrino
</code></pre>

<p>Create Padrino project just as you do when using MRI or REE:</p>

<pre class="highlight shell"><code><span class="gp">$ </span>padrino g project jrack-test
</code></pre>

<p><code>cd ./jrack-test</code> and you should edit <code>Gemfile</code>:</p>

<pre class="highlight ruby"><code><span class="c1"># JRuby deployment requirements</span>
<span class="c1"># please add these lines...</span>
<span class="n">gem</span> <span class="s1">'jruby-openssl'</span>
<span class="n">gem</span> <span class="s1">'jruby-rack'</span>
<span class="n">gem</span> <span class="s1">'warbler'</span>
</code></pre>

<p>Now you can go:</p>

<pre class="highlight shell"><code><span class="gp">$ </span>bundle
</code></pre>

<p>Then, create the test controller:</p>

<pre class="highlight shell"><code>padrino gen controller index get:index get:hello get:show_path
</code></pre>

<p>A controller sample is here:</p>

<pre class="highlight ruby"><code><span class="c1"># index.rb</span>
<span class="no">JrackTest</span><span class="p">.</span><span class="nf">controllers</span> <span class="ss">:index</span> <span class="k">do</span>
  <span class="n">get</span> <span class="ss">:index</span> <span class="k">do</span>
    <span class="s2">"Hello, JPadrino!"</span>
  <span class="k">end</span>

  <span class="n">get</span> <span class="ss">:hello</span><span class="p">,</span> <span class="ss">:map</span> <span class="o">=&gt;</span> <span class="s1">'/:id'</span> <span class="k">do</span>
    <span class="s2">"Hello, </span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">]</span><span class="si">}</span><span class="s2">!"</span>
  <span class="k">end</span>

  <span class="n">get</span> <span class="ss">:show_path</span><span class="p">,</span> <span class="ss">:map</span> <span class="o">=&gt;</span> <span class="s1">'/show-path/*urls'</span> <span class="k">do</span>
    <span class="s2">"You accessed: </span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:urls</span><span class="p">].</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<p>Then run:</p>

<pre class="highlight shell"><code><span class="gp">$ </span>padrino start
</code></pre>

<p>To run JRuby on 1.9 compat mode:</p>

<pre class="highlight shell"><code><span class="nb">alias </span><span class="nv">padrino</span><span class="o">=</span><span class="s1">'jruby --1.9 -S padrino'</span>
padrino start
</code></pre>

<p>You can access <code>localhost:3000</code> as you run padrino on MRIâ€¦</p>

<hr />

<h2 id="how-to-create-war">How to create WAR</h2>

<p>Now you should have installed <code>warbler</code> gem, so you can:</p>

<pre class="highlight shell"><code>warble config
</code></pre>

<p>Edit <code>config/warble.rb</code> if you want to apply some customizations. You can access
<a href="https://github.com/jruby/jruby-rack">JRuby-Rack official README</a>
and <a href="http://www.rubydoc.info/github/jruby/warbler">Warbler rdoc</a>.</p>

<p>For example, if you want to deploy the app to server root directory, just add to
<code>config/warble.rb</code>:</p>

<pre class="highlight ruby"><code><span class="n">config</span><span class="p">.</span><span class="nf">jar_name</span> <span class="o">=</span> <span class="s2">"ROOT"</span>
</code></pre>

<p>Deploying with JRuby on 1.9 compat mode:</p>

<pre class="highlight ruby"><code><span class="n">config</span><span class="p">.</span><span class="nf">webxml</span><span class="p">.</span><span class="nf">jruby</span><span class="p">.</span><span class="nf">compat</span><span class="p">.</span><span class="nf">version</span> <span class="o">=</span> <span class="s2">"1.9"</span>
</code></pre>

<p>If you are ready, run:</p>

<pre class="highlight shell"><code>warble war
</code></pre>

<p>You would get <code>jrack-test.war</code> (the same name as your project diresctory name),
and you can deploy this war file to tomcat! I tested on tomcat 6.0.20, and it
works well with quick response.</p>
</div></div></div><hr /><footer class="footer"><p>Padrino is released under the MIT LICENSE<br />
Hosting by <a href="https://pages.github.com">GitHub Pages</a></p>
</footer><script src="../../assets/javascripts/all-c2e0cecd.js"></script></div></body></html>